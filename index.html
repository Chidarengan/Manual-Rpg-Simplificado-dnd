<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Criação de Ficha D&D 5e Simplificado</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #5a2e00;
            border-bottom: 2px solid #deb887;
            padding-bottom: 5px;
            margin-top: 25px;
        }
        h1 {
            text-align: center;
            border-bottom: none;
            color: #8b4513;
            font-size: 2.5em;
            margin-bottom: 30px;
        }
        h2 {
            font-size: 1.8em;
        }
        h3 {
            font-size: 1.4em;
        }
        p {
            margin-bottom: 10px;
        }
        ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        ol {
            list-style-type: decimal;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        .section {
            margin-bottom: 25px;
        }
        .attribute-table, .proficiency-table, .equipment-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .attribute-table th, .attribute-table td,
        .proficiency-table th, .proficiency-table td,
        .equipment-table th, .equipment-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .attribute-table th, .proficiency-table th, .equipment-table th {
            background-color: #f2f2f2;
            color: #5a2e00;
        }
        /* Estilo para a nova tabela de descrições de atributos */
        .attribute-descriptions {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .attribute-descriptions th,
        .attribute-descriptions td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            vertical-align: top; /* Alinha o texto ao topo da célula */
        }
        .attribute-descriptions th {
            background-color: #f2f2f2;
            color: #5a2e00;
        }
        .attribute-descriptions tbody tr:nth-child(odd) {
            background-color: #f9f9f9; /* Cor para linhas ímpares, melhora a legibilidade */
        }
        .note {
            background-color: #fff8e1;
            border-left: 5px solid #ffd700;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .example {
            background-color: #e6f7ff;
            border-left: 5px solid #3399ff;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        /* Novo estilo para a nota azul */
        .info-note {
            background-color: #e6f7ff; /* Cor similar ao .example */
            border-left: 5px solid #3399ff; /* Cor similar ao .example */
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 4px;
            color: #0056b3; /* Um azul mais escuro para o texto */
            font-style: italic;
        }
        /* Estilo para o botão de toggle */
        .toggle-button-container {
            text-align: center; /* Centraliza o botão */
            margin-top: 10px;
            margin-bottom: 20px;
        }
        .toggle-button {
            background-color: #deb887; /* Cor de fundo para o botão */
            border: none;
            cursor: pointer;
            padding: 8px 12px; /* Aumenta o padding para o botão ser mais visível */
            border-radius: 8px; /* Cantos mais arredondados */
            transition: background-color 0.2s ease, transform 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Sombra para destacar */
        }
        .toggle-button:hover {
            background-color: #c2a078; /* Cor mais escura ao passar o mouse */
            transform: translateY(-1px); /* Pequeno efeito de elevação */
        }
        .toggle-icon {
            display: inline-block;
            transition: transform 0.3s ease; /* Transição suave para a rotação */
            vertical-align: middle; /* Alinha o ícone com o texto se houver */
            color: #5a2e00; /* Cor do ícone */
        }
        .toggle-icon.rotated {
            transform: rotate(180deg); /* Gira 180 graus para baixo */
        }

        /* Estilo para as tabelas expansíveis */
        .collapsible-table {
            width: 100%;
            border-collapse: collapse;
            max-height: 0; /* Começa colapsada */
            opacity: 0;   /* Começa invisível */
            overflow: hidden; /* Esconde o conteúdo que excede o max-height */
            margin-bottom: 0; /* Não ocupa espaço quando fechada */
            transition: max-height 0.5s ease-out, opacity 0.5s ease-out, margin-bottom 0.5s ease-out;
        }
        .collapsible-table.table-open {
            max-height: 500px; /* Um valor grande o suficiente para a tabela expandir */
            opacity: 1;
            margin-bottom: 20px; /* Restaura a margem quando aberta */
        }
        .collapsible-table.table-closed-display-none {
            display: none; /* Remove completamente do fluxo após a transição de fechamento */
        }

        /* Estilo para a tabela de Experiência */
        .experience-table {
            width: 50%; /* Ajuste a largura conforme necessário */
            margin: 20px auto; /* Centraliza a tabela */
            border-collapse: collapse;
        }
        .experience-table th, .experience-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .experience-table th {
            background-color: #f2f2f2;
            color: #5a2e00;
        }

        /* Estilos para a calculadora de PV */
        .hp-calculator {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: flex-end;
            justify-content: center;
        }
        .hp-calculator label {
            font-weight: bold;
            margin-bottom: 5px;
            width: 100%; /* Para labels ficarem em sua própria linha */
        }
        .hp-calculator div {
            flex: 1;
            min-width: 120px; /* Garante que os inputs não fiquem muito pequenos */
        }
        .hp-calculator input[type="number"],
        .hp-calculator select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Inclui padding e borda na largura */
        }
        .hp-calculator button {
            background-color: #5a2e00;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .hp-calculator button:hover {
            background-color: #8b4513;
        }
        .hp-calculator #hpResult {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: #5a2e00;
            width: 100%;
            text-align: center;
            background-color: #e0f2f7; /* Fundo leve para o resultado */
            padding: 10px;
            border-radius: 4px;
        }
        /* Novo estilo para o título da calculadora */
        .calculator-title {
            text-align: center;
            color: #5a2e00;
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid #deb887;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Manual de Criação de Ficha D&D 5e Simplificado</h1>

        <div class="section">
            <div class="section">
                <h2>1. Informações Básicas do Personagem</h2>
                <!-- O iframe carrega a ficha do personagem, permitindo visualização e interação. -->
                <iframe src="Ficha.html" style="width:100%; height:1100px; border:none;" id="fichaIframe"></iframe>
            </div>
            <ul>
                <li>Preencha seu <strong>Nome do Personagem</strong>, <strong>Classe</strong>, <strong>Raça</strong> e <strong>Nível</strong>.</li>
                <li>Em <strong>Jogador</strong>, escreva seu próprio nome.</li>
                <li>Em <strong>Exp</strong>, deixe em branco ou anote o valor inicial se o Mestre fornecer.</li>
            </ul>
        </div>

        <div class="section">
            <h2>2. Atributos</h2>
            <p>Atributos são as características fundamentais do seu personagem. Cada um tem um modificador que influencia diversas ações no jogo.</p>
            
            <!-- Tabela para alinhar as descrições dos atributos -->
            <table class="attribute-descriptions">
                <thead>
                    <tr>
                        <th style="width: 15%;">Atributo</th>
                        <th>Descrição e Uso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Força (For)</strong></td>
                        <td>Poder físico, força bruta (combate corpo a corpo, carregar peso, Atletismo...).</td>
                    </tr>
                    <tr>
                        <td><strong>Destreza (Des)</strong></td>
                        <td>Agilidade, reflexos, equilíbrio (CA, Iniciativa, armas à distância, Acrobacia, Furtividade...).</td>
                    </tr>
                    <tr>
                        <td><strong>Constituição (Con)</strong></td>
                        <td>Vigor, saúde, resistência (Pontos de Vida, resistência a venenos...).</td>
                    </tr>
                    <tr>
                        <td><strong>Inteligência (Int)</strong></td>
                        <td>Raciocínio, conhecimento, análise (magias de Mago, Arcanismo, História, Investigação, Natureza, Religião...).</td>
                    </tr>
                    <tr>
                        <td><strong>Sabedoria (Sab)</strong></td>
                        <td>Percepção, intuição, força de vontade (magias de Clérigo/Druida, Percepção, Intuição, Medicina, Sobrevivência...).</td>
                    </tr>
                    <tr>
                        <td><strong>Carisma (Car)</strong></td>
                        <td>Personalidade, persuasão, liderança (magias de Bardo/Feiticeiro, Atuação, Enganação, Intimidação, Persuasão...).</td>
                    </tr>
                </tbody>
            </table>

            <h3>Distribuição de Atributos (15, 14, 13, 12, 10, 8) + Bônus (+1 e +2)</h3>
            <ol>
                <li>Você tem seis números fixos: 15, 14, 13, 12, 10, 8. Atribua <strong>CADA UM DESSES NÚMEROS</strong> a <strong>UM ATRIBUTO</strong> diferente.</li>
                <li>Você tem dois bônus adicionais: um <strong>+1</strong> e um <strong>+2</strong>. Adicione o <strong>+1</strong> a <strong>UM</strong> atributo e o <strong>+2</strong> a <strong>OUTRO</strong> atributo. Não pode adicionar ambos ao mesmo atributo.</li>
                <li>Priorize colocar os bônus (+1 e +2) nos atributos mais importantes para sua classe e conceito de personagem. Constituição é sempre uma boa opção para um dos bônus, pois aumenta sua Vida.</li>
                <li>Costuma ser vantajoso manter esses números em par quando possível.</li>
            </ol>
            <div class="example">
                <h4>Exemplo (Mago):</h4>
                <ul>
                    <li>Números Fixos distribuídos: For 8, Des 10, Con 13, Int 14, Sab 12, Car 15.</li>
                    <li>Adicionando Bônus:
                        <ul>
                            <li>Adicione +2 à Inteligência (14 + 2 = 16)</li>
                            <li>Adicione +1 à Constituição (13 + 1 = 14)</li>
                        </ul>
                    </li>
                    <li>Resultado: For 8, Des 10, Con 14, Int 16, Sab 12, Car 15.</li>
                </ul>
            </div>

            <h3>Modificadores de Atributo</h3>
            <p>Após distribuir seus atributos, use a seguinte fórmula para determinar o modificador de cada um: <strong>(Valor do Atributo - 10) / 2, arredondado para baixo.</strong></p>
            <div class="info-note">
                <p>Lembre-se: 99% do tempo em D&D as coisas arredondam para baixo.</p>
            </div>
            <p>Se preferir, pode consultar a tabela.</p>
            <div class="toggle-button-container">
                <button id="toggleAttributeTableButton" class="toggle-button">
                    <!-- Ícone de seta para baixo. Pode ser substituído por um SVG mais elaborado se desejar. -->
                    <svg id="toggleAttributeIcon" class="toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
            </div>
            <!-- A tabela começa com a classe 'collapsible-table table-closed-display-none' para garantir que não ocupe espaço -->
            <table class="attribute-table collapsible-table table-closed-display-none" id="attributeTable">
                <thead>
                    <tr>
                        <th>Valor do Atributo</th>
                        <th>Modificador</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>20</td><td>+5</td></tr>
                    <tr><td>18 ou 19</td><td>+4</td></tr>
                    <tr><td>16 ou 17</td><td>+3</td></tr>
                    <tr><td>14 ou 15</td><td>+2</td></tr>
                    <tr><td>12 ou 13</td><td>+1</td></tr>
                    <tr><td>10 ou 11</td><td>+0</td></tr>
                    <tr><td>8 ou 9</td><td>-1</td></tr>
                </tbody>
            </table>
            <p>Preencha os modificadores nos campos correspondentes na ficha.</p>
        </div>
        
        <div class="section">
            <h2>3. Pontos de Vida (PV)</h2>
            <p>Seus Pontos de Vida (PV) representam quão vivo seu personagem está. Se chegarem a 0, você cai inconsciente.</p>
            <ul>
                <li><strong>Nível 1:</strong> A Vida é o valor máximo do dado de vida da sua classe + seu modificador de Constituição.</li>
                <li><strong>Do Nível 2 em diante:</strong> A cada nível, você ganha um valor fixo (a média do dado de vida arredondada para cima, que é sempre metade do dado + 1) + seu modificador de Constituição.
                    <div class="note">
                        <p><strong>Aumento de Constituição:</strong> Se o seu modificador de Constituição aumentar em algum momento (por exemplo, de +2 para +3), você ganha Vida retroativamente. Você adiciona o novo bônus de Constituição para *todos* os níveis que já possui. Por exemplo, se você está no Nível 4 e seu modificador de Constituição aumenta em +1, você ganha +4 de Vida (1 Vida para cada um dos 4 níveis).</p>
                    </div>
                </li>
            </ul>
            <table class="proficiency-table">
                <thead>
                    <tr>
                        <th>Dado</th>
                        <th>Classes</th>
                        <th>Nível 1 (PV)</th>
                        <th>Nível 2 ou + (PV)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>d12</td><td>Bárbaro</td><td>12 + mod(Con)</td><td>7 + mod(Con)</td></tr>
                    <tr><td>d10</td><td>Guerreiro, Paladino, Patrulheiro</td><td>10 + mod(Con)</td><td>6 + mod(Con)</td></tr>
                    <tr><td>d8</td><td>Bardo, Clérigo, Druida, Ladino, Monge, Bruxo (Warlock), Artífice</td><td>8 + mod(Con)</td><td>5 + mod(Con)</td></tr>
                    <tr><td>d6</td><td>Feiticeiro, Mago</td><td>6 + mod(Con)</td><td>4 + mod(Con)</td></tr>
                </tbody>
            </table>
            <div class="example">
                <h4>Exemplo: Guerreiro (d10) com Constituição 14 (+2 mod):</h4>
                <ul>
                    <li><strong>No Nível 1:</strong> O Guerreiro tem um d10 de Vida. Com Constituição 14, seu modificador de Constituição é +2.
                        Assim, sua Vida no Nível 1 é: 10 (d10 máximo) + 2 (mod de Con) = 12 PV.
                    </li>
                    <li><strong>Do Nível 2 em diante:</strong> A cada novo nível, você soma o valor fixo do dado de Vida da sua classe (para d10, é 6) e seu modificador de Constituição.
                        <br/>No Nível 2, você ganha: 6 (valor fixo d10) + 2 (mod de Con) = 8 PV adicionais.
                        <br/>Seu total de PV no Nível 2 seria: 12 (PV Nível 1) + 8 (PV Nível 2) = 20 PV totais.
                    </li>
                </ul>
            </div>

            <h4 class="calculator-title">Calculadora de Pontos de Vida</h4>
            <div class="hp-calculator">
                <div>
                    <label for="hpClass">Classe:</label>
                    <select id="hpClass">
                        <option value="d12">Bárbaro</option>
                        <option value="d10">Guerreiro</option>
                        <option value="d10">Paladino</option>
                        <option value="d10">Patrulheiro</option>
                        <option value="d8">Bardo</option>
                        <option value="d8">Clérigo</option>
                        <option value="d8">Druida</option>
                        <option value="d8">Ladino</option>
                        <option value="d8">Monge</option>
                        <option value="d8">Bruxo (Warlock)</option>
                        <option value="d8">Artífice</option>
                        <option value="d6">Feiticeiro</option>
                        <option value="d6">Mago</option>
                    </select>
                </div>
                <div>
                    <label for="hpLevel">Nível:</label>
                    <input type="number" id="hpLevel" min="1" max="20" value="1">
                </div>
                <div>
                    <label for="hpCon">Constituição:</label>
                    <input type="number" id="hpCon" min="1" max="30" value="14">
                </div>
                <button id="calculateHp">Calcular PV</button>
                <div id="hpResult">Seu PV Total: 0</div>
            </div>

            <p>Preencha o campo "<strong>Vida</strong>" na ficha.</p>
            <p>Preencha também o campo "<strong>D-Vida</strong>" com o tipo de dado de Vida da sua classe (ex: d10).</p>
        </div>

        <div class="section">
            <h2>4. Outras Informações na Ficha</h2>
            <ul>
                <li><strong>Prof (Proficiência):</strong> Seu bônus de proficiência. Representa sua aptidão em algo. No momento, todos têm <strong>+2</strong>. Este bônus aumenta em +1 nos Níveis 5, 9, 13 e 17.</li>
                <li><strong>CA (Classe de Armadura):</strong> Dificuldade para te acertar em combate. Normalmente depende da sua armadura. Quando não se usa armadura, sua CA é 10 + seu modificador de Destreza. Você a calculará com base no equipamento inicial.</li>
                <li><strong>Mov (Movimento):</strong> Distância que você anda por turno. Costuma ser <strong>30 pés</strong> (6 quadrados no mapa). Um quadrado no mapa equivale a 5 pés. Usamos "pés" porque os materiais originais são americanos e a tradução para "metros" pode soar estranha. Exceções incluem raças pequenas (como anões e halflings, que geralmente têm 25 pés) ou raças com habilidades de voo.</li>
                <li><strong>Ini (Iniciativa):</strong> Quem age primeiro no combate. É igual ao seu <strong>modificador de Destreza</strong>.</li>
                <li><strong>MagDC (CD de Magia):</strong> Dificuldade para resistir às suas magias (se sua classe usar magia). Calcule como: 8 + prof + atributo de conjuração.
                </li>
                <li><strong>D-Vida (Dados de Vida):</strong> São os dados que você usa para recuperar Pontos de Vida durante um Descanso Curto. O tipo de dado (d6, d8, d10, d12) é determinado pela sua classe. Você tem um número de Dados de Vida igual ao seu nível de personagem.
                    <br/>Durante um Descanso Curto, você pode gastar quantos Dados de Vida quiser, um de cada vez. Para cada dado gasto, role-o e some seu modificador de Constituição ao resultado para recuperar PV. Em um Descanso Longo, você recupera metade do total de D-Vidas gastos (arredondado para cima).
                </li>
                <div class="note">
                    <p>O Mestre permite que seu atributo de conjuração seja o que você preferir desde que seja um dos atributos mentais (Int, Sab, Car), não necessariamente o padrão da classe. </p>
                </div>
            </ul>

            <h3>Tabela de Pontos de Experiência por Nível</h3>
            <p>Se preferir, pode consultar a tabela de experiência.</p>
            <div class="toggle-button-container">
                <button id="toggleExperienceTableButton" class="toggle-button">
                    <svg id="toggleExperienceIcon" class="toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
            </div>
            <table class="experience-table collapsible-table table-closed-display-none" id="experienceTable">
                <thead>
                    <tr>
                        <th>Pontos de Experiência</th>
                        <th>Nível</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>0</td><td>1</td></tr>
                    <tr><td>300</td><td>2</td></tr>
                    <tr><td>900</td><td>3</td></tr>
                    <tr><td>2,700</td><td>4</td></tr>
                    <tr><td>6,500</td><td>5</td></tr>
                    <tr><td>14,000</td><td>6</td></tr>
                    <tr><td>23,000</td><td>7</td></tr>
                    <tr><td>34,000</td><td>8</td></tr>
                    <tr><td>48,000</td><td>9</td></tr>
                    <tr><td>64,000</td><td>10</td></tr>
                    <tr><td>85,000</td><td>11</td></tr>
                    <tr><td>100,000</td><td>12</td></tr>
                    <tr><td>120,000</td><td>13</td></tr>
                    <tr><td>140,000</td><td>14</td></tr>
                    <tr><td>165,000</td><td>15</td></tr>
                    <tr><td>195,000</td><td>16</td></tr>
                    <tr><td>225,000</td><td>17</td></tr>
                    <tr><td>265,000</td><td>18</td></tr>
                    <tr><td>305,000</td><td>19</td></tr>
                    <tr><td>355,000</td><td>20</td></tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>5. Proficiências de Atributo (Salvaguardas)</h2>
            <p>As "bolinhas" ao lado de cada atributo na sua ficha representam proficiência nas salvaguardas (testes de resistência) daquele atributo. Você é proficiente em dois atributos.</p>
            <ul>
                <li>Você vai escolher <strong>2</strong> atributos para ser proficiente.</li>
                <li>Um deve ser entre: <strong>Força (For)</strong>, <strong>Inteligência (Int)</strong>, ou <strong>Carisma (Car)</strong>.</li>
                <li>O outro deve ser entre: <strong>Destreza (Des)</strong>, <strong>Sabedoria (Sab)</strong>, ou <strong>Constituição (Con)</strong>.</li>
                <li>Marque as bolinhas correspondentes na ficha.</li>
            </ul>
        </div>

        <div class="section">
            <h2>6. Perícias</h2>
            <p>Perícias representam sua aptidão em diversas áreas. Marque a bolinha ao lado da perícia se você é proficiente nela. Se você é proficiente, adicione seu bônus de proficiência ao modificador de atributo da perícia.</p>

            <table class="proficiency-table">
                <thead>
                    <tr>
                        <th>Número de Perícias</th>
                        <th>Classe(s)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>4 Perícias</td><td>Ladino</td></tr>
                    <tr><td>3 Perícias</td><td>Bardo, Patrulheiro</td></tr>
                    <tr><td>2 Perícias</td><td>Bárbaro, Clérigo, Druida, Guerreiro, Monge, Paladino, Bruxo, Feiticeiro, Mago</td></tr>
                </tbody>
            </table>
            <p>Preencha os valores calculados para cada perícia na ficha.</p>
        </div>

        <div class="section">
            <h2>7. Equipamento Inicial</h2>
            <p>Você começa com o seguinte equipamento básico universal, além do equipamento concedido pela sua classe (veja tabela abaixo).</p>
            <ul>
                <li>Mochila, Saco de Dormir, Kit de Cozinha, Caixa com Material para Fazer Fogo, Tochas (10), Cantil, Corda de Cânhamo (50 pés), Pé de Cabra, Martelo, Velas (10), Lampião, Frascos de Óleo (2), Rolo de Barbante, Sino, Pá, 10 Pergaminhos, Tinta (garrafa de ink), Caneta de Tinta (ink pen), Cobertor, 2 Blocos de Incenso, uma segunda muda de roupas, um espelho, bússola, giz.</li>
                <li>Todos vocês têm um <strong>instrumento musical</strong> e um <strong>set de dados</strong>.</li>
            </ul>

            <h3>Equipamento por Classe</h3>
            <p>Consulte a tabela para o equipamento inicial da sua classe. Anote em "Items/Equipamentos" na sua ficha.</p>
            <table class="equipment-table">
                <thead>
                    <tr>
                        <th>Classe</th>
                        <th>Equipamento Inicial</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>Bárbaro</strong></td><td>(a) um machado grande ou (b) qualquer arma marcial corpo-a-corpo, (a) dois machados de mão ou (b) qualquer arma simples, um pacote de aventureiro e quatro azagaias.</td></tr>
                    <tr><td><strong>Bardo</strong></td><td>(a) uma rapieira, (b) uma espada longa ou (c) qualquer arma simples, (a) um pacote de diplomata ou (b) um pacote de artista, (a) um alaúde ou (b) qualquer outro instrumento musical, armadura de couro e uma adaga.</td></tr>
                    <tr><td><strong>Bruxo</strong></td><td>(a) uma besta leve e 20 virotes ou (b) qualquer arma simples, (a) uma bolsa de componentes ou (b) um foco arcano, (a) um pacote de estudioso ou (b) um pacote de explorador, armadura de couro, qualquer arma simples e duas adagas.</td></tr>
                    <tr><td><strong>Clérigo</strong></td><td>(a) uma maça ou (b) um martelo de guerra (se for proficiente), (a) brunea, (b) armadura de couro ou (c) cota de malha (se for proficiente), (a) uma besta leve e 20 virotes ou (b) qualquer arma simples, (a) um pacote de sacerdote ou (b) um pacote de aventureiro, um escudo e um símbolo sagrado.</td></tr>
                    <tr><td><strong>Druida</strong></td><td>(a) um escudo de madeira ou (b) qualquer arma simples, (a) uma cimitara ou (b) qualquer arma corpo-a-corpo, (a) um pacote de estudioso ou (b) um pacote de explorador, armadura de couro, um pacote de aventureiro e um foco druídico.</td></tr>
                    <tr><td><strong>Feiticeiro</strong></td><td>(a) uma besta leve e 20 virotes ou (b) qualquer arma simples, (a) uma bolsa de componentes ou (b) um foco arcano, (a) um pacote de estudioso ou (b) um pacote de explorador.</td></tr>
                    <tr><td><strong>Guerreiro</strong></td><td>(a) cota de malha ou (b) gibão de pelos, arco longo e 20 flechas, (a) uma arma marcial e um escudo ou (b) duas armas marciais, (a) uma besta leve e 20 virotes ou (b) duas machadas de arremesso, (a) um pacote de aventureiro ou (b) um pacote de explorador.</td></tr>
                    <tr><td><strong>Ladino</strong></td><td>(a) uma rapieira ou (b) uma espada longa, (a) um arco curto e uma aljava com 20 flechas ou (b) uma espada curta, (a) um pacote de assaltante ou (b) um pacote de aventureiro ou (c) um pacote de explorador, armadura de couro, duas adagas e ferramentas de ladrão.</td></tr>
                    <tr><td><strong>Mago</strong></td><td>(a) um bordão ou (b) uma adaga, (a) uma bolsa de componentes ou (b) um foco arcano, (a) um pacote de estudioso ou (b) um pacote de explorador, um grimório.</td></tr>
                    <tr><td><strong>Monge</strong></td><td>(a) uma espada curta ou (b) qualquer arma simples, (a) um pacote de explorador ou (b) um pacote de aventureiro, 10 dardos.</td></tr>
                    <tr><td><strong>Paladino</td><td>(a) uma arma marcial e um escudo ou (b) duas armas marciais, (a) cinco azagaias ou (b) qualquer arma simples corpo-a-corpo, (a) um pacote de sacerdote ou (b) um pacote de aventureiro, cota de malha e um símbolo sagrado.</td></tr>
                    <tr><td><strong>Patrulheiro</strong></td><td>(a) brunea ou (b) armadura de couro, (a) duas espadas curtas ou (b) duas armas simples corpo-a-corpo, (a) um pacote de explorador ou (b) um pacote de aventureiro, um arco longo e uma aljava com 20 flechas.</td></tr>
                </tbody>
            </table>

            <h3>Proficiência em Armaduras e Armas</h3>
            <p>Sua CA será calculada com base na sua armadura e modificador de Destreza. Abaixo, as proficiências gerais:</p>
            <h4>Proficiências de Armadura por Classe:</h4>
            <table class="proficiency-table">
                <thead>
                    <tr>
                        <th>Tipo de Proficiência</th>
                        <th>Classes</th>
                        <th>Observações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Nenhuma</td><td>Feiticeiro, Mago, Monge</td><td>Monges têm "Defesa sem Armadura" para calcular a CA.</td></tr>
                    <tr><td>Leves</td><td>Bardo, Ladino, Bruxo</td><td></td></tr>
                    <tr><td>Leves, Médias, Escudos</td><td>Bárbaro, Clérigo, Druida, Patrulheiro</td><td>Bárbaros também têm "Defesa sem Armadura" para calcular a CA.</td></tr>
                    <tr><td>Todas as Armaduras, Escudos</td><td>Guerreiro, Paladino</td><td>Proficiência em armaduras Leves, Médias, Pesadas e Escudos.</td></tr>
                </tbody>
            </table>
            <h4>Proficiências Agrupadas por Classe (Armas):</h4>
            <table class="proficiency-table">
                <thead>
                    <tr>
                        <th>Tipo de Proficiência</th>
                        <th>Classes</th>
                        <th>Observações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Armas Simples</td><td>Bardo, Clérigo, Druida, Feiticeiro, Ladino, Mago, Bruxo</td><td>Ladinos e Bardos também têm proficiência com armas marciais específicas (ex: espada longa, rapieira, besta de mão).</td></tr>
                    <tr><td>Armas Simples e Marciais</td><td>Bárbaro, Guerreiro, Monge, Paladino, Patrulheiro</td><td>Monges têm proficiência com certas armas marciais (espada curta, espada longa) além das simples.</td></tr>
                </tbody>
            </table>
            <h4>Armas de Dano (d4 a d12):</h4>
            <p>Se precisar saber o dado de dano de alguma arma:</p>
            <table class="equipment-table">
                <thead>
                    <tr>
                        <th>Dado de Dano</th>
                        <th>Armas Comuns (Exemplos)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1d4</td><td>Adaga, Clava, Foice, Besta de Mão, Dardo, Funda, Azagaia</td></tr>
                    <tr><td>1d6</td><td>Arco Curto, Bastão, Besta Leve, Cimitarrra, Espada Curta, Machadinha, Maça Leve, Trident</td></tr>
                    <tr><td>1d8</td><td>Arco Longo, Florete, Lança Longa, Maça Estrela, Machado de Batalha, Picareta de Guerra, Espada Longa</td></tr>
                    <tr><td>1d10</td><td>Alabarda, Mangual Pesado, Picareta de Guerra, Glaive, Grande Machado, Grande Espada, Martelo de Guerra, Chicote</td></tr>
                    <tr><td>1d12</td><td>Machado Grande, Espada de Duas Mãos</td></tr>
                </tbody>
            </table>

            <h3>Ferramentas e Kits</h3>
            <p>Você pode pegar proficiência em um kit de ferramentas da lista abaixo. Se quiser, pode trocar uma das perícias extras que o Mestre concedeu por proficiência em mais um kit ou ferramenta.</p>
            <ul>
                <li>Suprimentos de Alquimista</li>
                <li>Suprimentos de Cervejeiro</li>
                <li>Suprimentos de Calígrafo</li>
                <li>Ferramentas de Carpinteiro</li>
                <li>Ferramentas de Cartógrafo</li>
                <li>Ferramentas de Sapateiro</li>
                <li>Utensílios de Cozinha</li>
                <li>Ferramentas de Sopro de Vidro</li>
                <li>Ferramentas de Joalheiro</li>
                <li>Ferramentas de Coureiro</li>
                <li>Ferramentas de Pedreiro</li>
                <li>Suprimentos de Pintor</li>
                <li>Ferramentas de Oleiro</li>
                <li>Ferramentas de Ferreiro</li>
                <li>Ferramentas de Funileiro/Engenhoqueiro</li>
                <li>Ferramentas de Tecelão</li>
                <li>Ferramentas de Escultor de Madeira</li>
                <li>Ferramentas de Navegador</li>
                <li>Ferramentas de Ladrão</li>
            </ul>
        </div>

        <div class="section">
            <h2>8. Inspiração e Save de Morte</h2>
            <ul>
                <li><strong>Inspiração:</strong> A bolinha de "Inspiração" é preenchida quando o Mestre concede um ponto de inspiração ao seu personagem por boas interpretações ou atos heroicas.</li>
                <li><strong>Save de Morte:</strong> Marque os sucessos e falhas. Se acumular 3 falhas, seu personagem morre. Se acumular 3 sucessos, você estabiliza e para de correr risco de morte (mas permanece inconsciente).</li>
            </ul>
        </div>

        <div class="section">
            <h2>9. Habilidades de Classe, Raça e Outras</h2>
            <p>Esta seção na ficha é para anotar as habilidades especiais que sua classe e raça concedem, assim como quaisquer outras características importantes que seu personagem possua. Consulte o Mestre caso precise de alguma informação de raça ou antecedente que não foi coberta aqui.</p>
        </div>

        <div class="section">
            <h2>10. Magias</h2>
            <p>Se sua classe for um conjurador, esta seção é para listar suas magias conhecidas ou preparadas. Preencha conforme as regras da sua classe e o atributo de conjuração que você escolheu.</p>
        </div>

        <div class="section">
            <h2>11. Notas / Itens / Equipamentos</h2>
            <p>Use esta seção para detalhar seus itens e equipamentos, bem como para quaisquer notas adicionais sobre seu personagem, o mundo, ou a campanha que você queira registrar.</p>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Lógica para a tabela de Modificadores de Atributo
            const toggleAttributeTableButton = document.getElementById('toggleAttributeTableButton');
            const attributeTable = document.getElementById('attributeTable');
            const toggleAttributeIcon = document.getElementById('toggleAttributeIcon');
            const transitionDuration = 500; // Duração da transição em ms, deve ser a mesma do CSS

            // Garante que a tabela de atributos comece escondida e sem ocupar espaço
            attributeTable.classList.add('table-closed-display-none');

            toggleAttributeTableButton.addEventListener('click', function(event) {
                event.preventDefault();
                if (attributeTable.classList.contains('table-open')) {
                    attributeTable.classList.remove('table-open');
                    toggleAttributeIcon.classList.remove('rotated');
                    setTimeout(() => {
                        attributeTable.classList.add('table-closed-display-none');
                    }, transitionDuration); 
                } else {
                    attributeTable.classList.remove('table-closed-display-none');
                    void attributeTable.offsetWidth; // Força o reflow
                    attributeTable.classList.add('table-open');
                    toggleAttributeIcon.classList.add('rotated');
                }
            });

            // Lógica para a tabela de Pontos de Experiência
            const toggleExperienceTableButton = document.getElementById('toggleExperienceTableButton');
            const experienceTable = document.getElementById('experienceTable');
            const toggleExperienceIcon = document.getElementById('toggleExperienceIcon');

            // Garante que a tabela de experiência comece escondida e sem ocupar espaço
            experienceTable.classList.add('table-closed-display-none');

            toggleExperienceTableButton.addEventListener('click', function(event) {
                event.preventDefault();
                if (experienceTable.classList.contains('table-open')) {
                    experienceTable.classList.remove('table-open');
                    toggleExperienceIcon.classList.remove('rotated');
                    setTimeout(() => {
                        experienceTable.classList.add('table-closed-display-none');
                    }, transitionDuration);
                } else {
                    experienceTable.classList.remove('table-closed-display-none');
                    void experienceTable.offsetWidth; // Força o reflow
                    experienceTable.classList.add('table-open');
                    toggleExperienceIcon.classList.add('rotated');
                }
            });

            // Lógica para a Calculadora de Pontos de Vida (PV)
            const calculateHpButton = document.getElementById('calculateHp');
            const hpClassSelect = document.getElementById('hpClass');
            const hpLevelInput = document.getElementById('hpLevel');
            const hpConInput = document.getElementById('hpCon');
            const hpResultDiv = document.getElementById('hpResult');

            calculateHpButton.addEventListener('click', function() {
                const selectedClass = hpClassSelect.value;
                const level = parseInt(hpLevelInput.value);
                const conScore = parseInt(hpConInput.value);

                if (isNaN(level) || level < 1 || isNaN(conScore)) {
                    hpResultDiv.textContent = "Por favor, insira valores válidos para Nível e Constituição.";
                    return;
                }

                // Calcula o modificador de Constituição
                const conModifier = Math.floor((conScore - 10) / 2);

                let totalHp = 0;
                let maxHitDieValue = 0;
                let fixedHitDieAverage = 0;

                // Mapeia o dado de vida da classe para seu valor máximo e valor fixo (média)
                switch (selectedClass) {
                    case 'd12':
                        maxHitDieValue = 12;
                        fixedHitDieAverage = 7;
                        break;
                    case 'd10':
                        maxHitDieValue = 10;
                        fixedHitDieAverage = 6;
                        break;
                    case 'd8':
                        maxHitDieValue = 8;
                        fixedHitDieAverage = 5;
                        break;
                    case 'd6':
                        maxHitDieValue = 6;
                        fixedHitDieAverage = 4;
                        break;
                }

                // Cálculo para o Nível 1
                totalHp = maxHitDieValue + conModifier;

                // Cálculo para Níveis 2 em diante
                if (level > 1) {
                    totalHp += (level - 1) * (fixedHitDieAverage + conModifier);
                }

                hpResultDiv.textContent = `Seu PV Total: ${totalHp}`;
            });


            // Script para ajustar a altura do iframe dinamicamente
            const iframe = document.getElementById('fichaIframe');
            if (iframe) { // Verifica se o iframe existe
                iframe.onload = function() {
                    try {
                        const iframeDoc = iframe.contentWindow.document;
                        const body = iframeDoc.body;
                        const html = iframeDoc.documentElement;
                        const height = Math.max( body.scrollHeight, body.offsetHeight,
                                                  html.clientHeight, html.scrollHeight, html.offsetHeight );
                        iframe.style.height = height + 'px';
                        iframe.style.overflow = 'hidden'; // Garante que o scrollbar do iframe seja removido
                    } catch (e) {
                        console.warn("Não foi possível ajustar a altura do iframe devido a restrições de segurança (CORS).", e);
                        iframe.style.height = '800px'; // Altura de fallback se o ajuste dinâmico falhar
                    }
                };
                // Caso o iframe já esteja carregado quando o script é executado
                if (iframe.contentWindow && iframe.contentWindow.document.readyState === 'complete') {
                    iframe.onload();
                }
            }
        });
    </script>
</body>
</html>
